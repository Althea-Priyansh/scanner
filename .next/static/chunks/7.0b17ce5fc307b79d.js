"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7],{1007:function(e,t,i){i.r(t),i.d(t,{default:function(){return ee}});var n=i(5893),s=i(7294);function a(e){return document.getElementById(e)}function o(e){return a(e)}function l(e){return a(e)}function r(e,t){e&&e.classList.add(t)}function d(e,t){e&&e.classList.remove(t)}let c=!1,h=!1,p=!1,u=!1,g=!1,m=!1,w=!1,b=!1,I=!1,f=!1,T=!1,y=!1;if("userAgentData"in navigator){let e,t,i=[],n=navigator.userAgentData,s=n.platform.toLowerCase();if("brands"in n&&Array.isArray(n.brands)&&n.brands.length>0?i=n.brands:"uaList"in n&&Array.isArray(n.uaList)&&n.uaList.length>0&&(i=n.uaList),t=i.length,0==t)y=!0;else{for(e=0;e<t;e++){let t=i[e].brand.toLowerCase();if(t.indexOf("chrome")>=0){w=!0;break}if(t.indexOf("edge")>=0){m=!0;break}if(t.indexOf("opera")>=0){b=!0;break}}w||m||b||(w=!0),u=s.indexOf("mac")>=0,g=s.indexOf("chrome os")>=0,c="windows"==s,p="linux"==s}}else y=!0;if(y){let e,t=navigator.userAgent.toLowerCase(),i=navigator.platform.toLowerCase(),n=/harmonyos/g.test(t);"linux"==i&&t.indexOf("windows nt")>=0&&(i="harmonyos",n=!0),g=!n&&/cros/.test(t),I=-1!=t.indexOf("firefox"),e=t.match(/version\/([\d.]+).*safari/),f=!!e;let s=!n&&/android/g.test(t)||/android/g.test(i),a=/iphone/g.test(t)||/iphone/g.test(i),o=/macintosh/.test(t),l=navigator.maxTouchPoints||0,r=/ipad/g.test(t)||(o||"macintel"==i)&&l>1,d=!/ucweb|ucbrowser/g.test(t)&&/nexus/g.test(t)&&/version\/[\d.]+.*safari\//g.test(t),b=/playbook/g.test(t),y=/hp-tablet/g.test(t),D=/blackberry|bb10/g.test(t),v=/symbian/g.test(t),x=/windows phone/g.test(t),j=/mobile/g.test(t),S=b||r||y,_=!(!S&&!g&&(a||d||D||v||x||s||n||j))&&!S&&!g,W=t.indexOf("msie"),O=t.indexOf("trident"),P=t.indexOf("rv:"),k=t.indexOf("chrome"),E=t.indexOf("edge");c=_&&/win32|win64|windows/.test(i),m=c&&!I&&-1!=E,w=!m&&-1!=k,h=c&&/win64|x64/.test(t),u=_&&/mac68k|macppc|macintosh|macintel/.test(t),p=_&&/linux/.test(i),T=c&&!I&&!m&&!w&&(-1!=W||-1!=O||-1!=P)}let D={bWin:c,bWin64:h,bLinux:p,bMac:u,bChromeOS:g,bChrome:w,bEdge:m,bFirefox:I,bIE:T,bSafari:f};class v{bNotShowMessageAgain;dwtUtil;constructor(e){this.dwtUtil=e,this.bNotShowMessageAgain=!1}remove(){if(this.dwtUtil.checkIfImagesInBuffer())if(this.bNotShowMessageAgain)this.dwtUtil.removeCurrentImage();else{let e=['<div class="dynamsoft-dwt-header"></div>','<div class="dynamsoft-dwt-dlg-title">',"Are you sure to delete current page?","</div>"];e.push("<div class='dynamsoft-dwt-showMessage'><label class='dynamsoft-dwt-showMessage-detail' for = 'showMessage'><input type='checkbox' id='showMessage'/>Don't show this message again.&nbsp;</label></div>"),e.push('<div class="dynamsoft-dwt-installdlg-buttons"><input id="btnDelete" class="button-yes" type="button" value="Yes" /><input id="btnCancel" class="button-no" type="button" value="No" /> </div>'),Dynamsoft.DWT.ShowDialog(500,0,e.join(""),!0,!1);let t=o("btnDelete");t?.addEventListener("click",(()=>{let e=o("showMessage");e&&e.checked&&(this.bNotShowMessageAgain=!0),this.dwtUtil.removeCurrentImage(),Dynamsoft.DWT.CloseDialog()}));let i=o("btnCancel");i?.addEventListener("click",(()=>{let e=o("showMessage");e&&e.checked&&(this.bNotShowMessageAgain=!0),Dynamsoft.DWT.CloseDialog()}))}}}class x{dwtUtil;constructor(e){this.dwtUtil=e}removeAll(){if(!this.dwtUtil.checkIfImagesInBuffer())return;let e=['<div class="dynamsoft-dwt-header"></div>','<div class="dynamsoft-dwt-dlg-title">',"Are you sure to delete all pages?","</div>"];e.push('<div class="dynamsoft-dwt-installdlg-iconholder"><input id="btnDeleteForRemoveAll" class="button-yes" type="button" value="Yes" /><input id="btnCancelForRemoveAll" class="button-no" type="button" value="No" /> </div>'),Dynamsoft.DWT.ShowDialog(500,0,e.join(""),!0,!1);let t=o("btnDeleteForRemoveAll");t?.addEventListener("click",(()=>{this.dwtUtil.removeAllImages(),Dynamsoft.DWT.CloseDialog()}));let i=o("btnCancelForRemoveAll");i?.addEventListener("click",(()=>{Dynamsoft.DWT.CloseDialog()}))}}class j extends s.Component{dlgRemoveCurrent;dlgRemoveAll;constructor(e){super(e),this.dlgRemoveCurrent=new v(e.dwtUtil),this.dlgRemoveAll=new x(e.dwtUtil)}clickbtnZoomOut(){this.props.dwtUtil.onclickZoomOut()}clickbtnZoomIn(){this.props.dwtUtil.onclickZoomIn()}clickbtnOrigSize(){this.props.dwtUtil.onclickOrigSize()}clickbtnFitWindow(){this.props.dwtUtil.onclickFitWindow()}clickbtnRotateLeft(){this.props.dwtUtil.onclickRotateLeft()}clickbtnCrop(){this.props.dwtUtil.onclickCrop()}clickbtnShowImageEditor(){this.props.dwtUtil.onclickShowImageEditor()}clickbtnSelect(){this.props.dwtUtil.onclickSelect()}clickbtnHand(){this.props.dwtUtil.onclickHandButton()}clickbtnRemoveCurrentImage(){this.dlgRemoveCurrent.remove()}clickbtnRemoveAllImages(){this.dlgRemoveAll.removeAll()}render(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{id:"divEdit",children:(0,n.jsxs)("ul",{className:"operateGrp",children:[(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"menuIcon RemoveSelectedImages",style:{marginLeft:"5px"},title:"Remove current page",id:"DW_btnRemoveCurrentImage",onClick:e=>this.clickbtnRemoveCurrentImage()})}),(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"menuIcon RemoveAllImages",title:"Remove all pages",id:"DW_btnRemoveAllImages",onClick:e=>this.clickbtnRemoveAllImages()})}),(0,n.jsx)("li",{style:{width:"90px"}}),(0,n.jsxs)("li",{className:"lblShowCurrentImage",children:[(0,n.jsx)("input",{type:"text",size:2,id:"DW_CurrentImage",readOnly:!0}),"/",(0,n.jsx)("input",{type:"text",size:2,id:"DW_TotalImage",readOnly:!0})]}),(0,n.jsx)("li",{className:"lblZoom",children:(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{style:{width:"25%"},children:(0,n.jsx)("div",{className:"menuIcon ZoomOut",title:"Zoom out",id:"btnZoomOut",onClick:e=>this.clickbtnZoomOut()})}),(0,n.jsx)("li",{style:{width:"50%"},children:(0,n.jsx)("input",{type:"text",id:"DW_spanZoom",readOnly:!0})}),(0,n.jsx)("li",{style:{width:"25%"},children:(0,n.jsx)("div",{className:"menuIcon ZoomIn",title:"Zoom in",id:"btnZoomIn",onClick:e=>this.clickbtnZoomIn()})})]})}),(0,n.jsxs)("li",{children:[(0,n.jsx)("div",{style:{marginLeft:"10px"},className:"menuIcon OrigSize",title:"1:1",id:"btnOrigSize",onClick:e=>this.clickbtnOrigSize()}),(0,n.jsx)("div",{className:"menuIcon FitWindow",title:"Fit To Window",id:"btnFitWindow",style:{display:"none"},onClick:e=>this.clickbtnFitWindow()})]}),(0,n.jsx)("li",{style:{width:"50px"}}),(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"menuIcon RotateLeft",title:"Rotate left",id:"btnRotateL",onClick:e=>this.clickbtnRotateLeft()})}),(0,n.jsxs)("li",{children:[(0,n.jsx)("div",{className:"menuIcon grayimg Crop",title:"Please select an area to crop.",id:"btnCropGray"}),(0,n.jsx)("div",{className:"menuIcon Crop",title:"Crop",id:"btnCrop",style:{display:"none"},onClick:e=>this.clickbtnCrop()})]}),(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"menuIcon ShowEditor",title:"Show image editor",id:"btnShowImageEditor",onClick:e=>this.clickbtnShowImageEditor()})}),(0,n.jsxs)("li",{style:{marginTop:"0"},children:[(0,n.jsx)("div",{className:"menuIcon SelectSelected",title:"Select",id:"btnSelect_selected"}),(0,n.jsx)("div",{className:"menuIcon Select",style:{display:"none"},title:"Select",id:"btnSelect",onClick:e=>this.clickbtnSelect()})]}),(0,n.jsxs)("li",{style:{marginTop:"0"},children:[(0,n.jsx)("div",{className:"menuIcon HandSelected",style:{display:"none"},title:"Hand",id:"btnHand_selected"}),(0,n.jsx)("div",{className:"menuIcon Hand",title:"Hand",id:"btnHand",onClick:e=>this.clickbtnHand()})]})]})})})}}var S=i(7900);class _ extends s.Component{state;constructor(e){super(e),this.state={IfShowUI:!1,IfFeederEnabled:!0,IfAutoDiscardBlankpages:!1,IfDuplexEnabled:!1,PixelType:"2",Resolution:"30",strFileNameWithoutExt:"WebTWAINImage",strExtension:"pdf",bAllPages:!0}}saveOrUploadImage(e){let t=this.state.bAllPages.toString();console.log(t),this.props.dwtUtil.save(e,this.state.strFileNameWithoutExt,this.state.strExtension,t)}async uploadScanImages(){try{await this.props.dwtUtil.uploadScannedImages()}catch(e){console.error("Error uploading images:",e),alert("Failed to upload images. Please try again.")}}setIfShowUI(e){this.state.IfShowUI=e,this.setState(this.state)}setIfFeederEnabled(e){this.state.IfFeederEnabled=e,this.setState(this.state)}setIfAutoDiscardBlankpages(e){this.state.IfAutoDiscardBlankpages=e,this.setState(this.state)}setIfDuplexEnabled(e){this.state.IfDuplexEnabled=e,this.setState(this.state)}setPixelType(e){this.state.PixelType=e,this.setState(this.state)}setResolution(e){this.state.Resolution=e,this.setState(this.state)}onSourceChange(e){let t=e.target;this.props.dwtUtil.handleDeviceChanged(t.value)}acquireImage(e){let t=l("source");console.log(this.props.dwtUtil.acquireImage(t?.value,this.state)),this.props.dwtUtil.acquireImage(t?.value,this.state)}loadImagesOrPDFs(e){this.props.dwtUtil.loadImage()}handlePixelTypeChange(e){let t=e.target;if(t.checked){let e=parseInt(t.getAttribute("data-value"));this.setPixelType(e)}}handleCheckBoxChange(e,t){let i=e.target.checked;switch(t){case"IfShowUI":this.setIfShowUI(i);break;case"IfFeederEnabled":this.setIfFeederEnabled(i);break;case"IfAutoDiscardBlankpages":this.setIfAutoDiscardBlankpages(i);break;case"IfDuplexEnabled":this.setIfDuplexEnabled(i)}}handleChangeResolution(e){this.setResolution(e.target.value)}render(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{id:"divScanner",className:"divinput",children:(0,n.jsx)("ul",{className:"PCollapse",children:(0,n.jsxs)("li",{children:[(0,n.jsx)("div",{className:"divType",children:"Scan"}),(0,n.jsxs)("div",{id:"div_ScanImage",className:"divTableStyle",children:[(0,n.jsxs)("ul",{id:"ulScaneImageHIDE",children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("label",{htmlFor:"source",children:(0,n.jsx)("p",{children:"Select Source:"})}),(0,n.jsx)("select",{size:1,id:"source",style:{position:"relative"},onChange:e=>this.onSourceChange(e)})]}),(0,n.jsx)("li",{id:"divProductDetail",children:(0,n.jsxs)("ul",{id:"divTwainType",children:[(0,n.jsxs)("li",{children:[(0,n.jsxs)("label",{style:{width:"165px"},id:"lblShowUI",htmlFor:"showUI",children:[(0,n.jsx)("input",{type:"checkbox",id:"showUI",checked:this.state.IfShowUI,onChange:e=>this.handleCheckBoxChange(e,"IfShowUI")}),"Show Scanner UI\xa0"]}),(0,n.jsxs)("label",{htmlFor:"pageFeeder",children:[(0,n.jsx)("input",{type:"checkbox",id:"pageFeeder",checked:this.state.IfFeederEnabled,onChange:e=>this.handleCheckBoxChange(e,"IfFeederEnabled")}),"Use ADF\xa0"]})]}),(0,n.jsxs)("li",{children:[(0,n.jsxs)("label",{style:{width:"165px"},htmlFor:"DiscardBlankPage",children:[(0,n.jsx)("input",{type:"checkbox",id:"DiscardBlankPage",checked:this.state.IfAutoDiscardBlankpages,onChange:e=>this.handleCheckBoxChange(e,"IfAutoDiscardBlankpages")}),"Auto Remove Blank Page"]}),(0,n.jsxs)("label",{htmlFor:"Duplex",children:[(0,n.jsx)("input",{type:"checkbox",id:"Duplex",checked:this.state.IfDuplexEnabled,onChange:e=>this.handleCheckBoxChange(e,"IfDuplexEnabled")}),"2-sided Scan"]})]}),(0,n.jsxs)("li",{style:{display:"none"},children:["Pixel Type:",(0,n.jsxs)("label",{htmlFor:"BW",style:{marginLeft:"5px"},className:"lblPixelType",children:[(0,n.jsx)("input",{type:"radio",id:"BW",checked:this.state.PixelType==S.Z.DWT.EnumDWT_PixelType.TWPT_BW.toString(),"data-value":S.Z.DWT.EnumDWT_PixelType.TWPT_BW,onChange:e=>this.handlePixelTypeChange(e)}),"B&W"," "]}),(0,n.jsxs)("label",{htmlFor:"Gray",className:"lblPixelType",children:[(0,n.jsx)("input",{type:"radio",id:"Gray",checked:this.state.PixelType==S.Z.DWT.EnumDWT_PixelType.TWPT_GRAY.toString(),"data-value":S.Z.DWT.EnumDWT_PixelType.TWPT_GRAY,onChange:e=>this.handlePixelTypeChange(e)}),"Gray"," "]}),(0,n.jsxs)("label",{htmlFor:"RGB",className:"lblPixelType",children:[(0,n.jsx)("input",{type:"radio",id:"RGB",checked:this.state.PixelType==S.Z.DWT.EnumDWT_PixelType.TWPT_RGB.toString(),"data-value":S.Z.DWT.EnumDWT_PixelType.TWPT_RGB,onChange:e=>this.handlePixelTypeChange(e)}),"Color"]})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{children:"Resolution:"}),(0,n.jsxs)("select",{className:"custom-select w-50",id:"Resolution",size:1,value:this.state.Resolution,onChange:e=>this.handleChangeResolution(e),children:[(0,n.jsx)("option",{value:"30",children:"30"}),(0,n.jsx)("option",{value:"50",children:"50"}),(0,n.jsx)("option",{value:"90",children:"90"}),(0,n.jsx)("option",{value:"150",children:"150"}),(0,n.jsx)("option",{value:"200",children:"200"}),(0,n.jsx)("option",{value:"300",children:"300"})]})]})]})}),(0,n.jsxs)("li",{className:"btn-up-save",children:[(0,n.jsx)("input",{className:"upload-btn",type:"button",value:"Scan",onClick:e=>this.acquireImage(e)}),(0,n.jsx)("input",{className:"upload-btn",type:"button",value:"Upload",onClick:e=>this.uploadScanImages()})]})]}),(0,n.jsxs)("div",{id:"divNoScanners",style:{visibility:"hidden"},children:[(0,n.jsx)("a",{href:"#",className:"ClosetblLoadImage",children:(0,n.jsx)("img",{className:"imgClose",src:"assets/Images/Close.png",alt:"Close tblLoadImage"})}),(0,n.jsx)("img",{src:"assets/Images/Warning.png"}),(0,n.jsxs)("span",{className:"spanContent",children:[(0,n.jsx)("p",{className:"contentTitle",children:"No TWAIN compatible drivers detected"}),(0,n.jsx)("p",{className:"contentDetail",children:"You can Install a Virtual Scanner:"}),(0,n.jsxs)("p",{className:"contentDetail",children:[(0,n.jsx)("a",{id:"samplesource32bit",href:"https://download.dynamsoft.com/tool/twainds.win32.installer.2.1.3.msi",children:"32-bit Sample Source"}),(0,n.jsxs)("a",{id:"samplesource64bit",style:{display:"none"},href:"https://download.dynamsoft.com/tool/twainds.win64.installer.2.1.3.msi",children:[" ","64 - bit Sample Source"]})," ","from"," ",(0,n.jsx)("a",{target:"_blank",href:"http://www.twain.org",children:"TWG"})]})]})]})]})]})})})})}}var W=i(1819),O=i(7066),P=i(3036);const k={resourcesPath:"Resources",dwtProductKey:"t01898AUAACMAf/kWybj2DKpAY5ybkzKj2Uj3sKXwkYI5z4c1414IbscMO0NrX8bxfmaLZfPb/4jPnRhbyTYOhi6KpW28PR32+uVkA6fWdyrqO6WBk4+cwHsZ5nW3wzJvnsAJ6BdA9+OwA2KBtZYTMMStNvEAeoA6gHo1iAfcruL684lzQOzXfzZ0drKBU+s7bUDqOKWBk4+cJSApI4xlteMaELEn5wDQA/QWkO0iuwQEZ4AeoBeAOSRFp1+l5zFG",serviceInstallerLocation:"https://demo.dynamsoft.com/DWT/Resources/dist/18.5/",uploadTargetURL:"https://demo.dynamsoft.com/sample-uploads/"};class E{bufferSubject=new P.x;generalSubject=new P.x;_dwtObject;_devices=[];_selectedDevice="";_fileSavingPath="";_fileActualName="";_beforeSaveIndex=-1;_containerId;constructor(e){this._containerId=e}init(e,t){S.Z.DWT.ResourcesPath=k.resourcesPath,S.Z.DWT.ProductKey=k.dwtProductKey,S.Z.DWT.ServiceInstallerLocation=k.serviceInstallerLocation,S.Z.DWT.CreateDWTObjectEx({WebTwainId:this._containerId},(t=>{this._dwtObject=t,t.RegisterEvent("OnBufferChanged",((e,t,i,n)=>{this.bufferSubject.next("changed"),0===this._dwtObject?.HowManyImagesInBuffer?this.bufferSubject.next("empty"):this.bufferSubject.next("filled")})),e&&e(t)}),(e=>{t&&t(e)}))}destroy(){this._dwtObject&&this._dwtObject?.dispose()}getDevices(){return new Promise(((e,t)=>{this._devices=[],this._dwtObject?.GetDevicesAsync().then((t=>{for(let e=0;e<t.length;e++)this._devices.push({deviceId:Math.floor(1e5*Math.random()).toString(),name:t[e].displayName,label:t[e].displayName,deviceInfo:t[e]});e(this._devices)})).catch((function(e){t(e.message)}))}))}async getScannedImages(){return new Promise(((e,t)=>{if(!this._dwtObject)return void t(new Error("WebTwain object is not initialized"));const i=this._dwtObject.HowManyImagesInBuffer;if(0===i)return void e([]);const n=Array.from({length:i},((e,t)=>t));this.getBlob(n,S.Z.DWT.EnumDWT_ImageType.IT_PNG).then((t=>{e(t)})).catch((e=>{t(e)}))}))}getDeviceDetails(){return this._dwtObject?.GetSourceNames(!0)}selectADevice(e){return new Promise(((t,i)=>{let n=!1;0===this._devices.length&&i(!1),""==this._selectedDevice||this._selectedDevice!=e?(this._devices.forEach(((s,a)=>{if(s&&s.name===e){a>this._devices.length-1?n=!0:(n=!0,this._dwtObject?.SelectDeviceAsync(s.deviceInfo).then((()=>{this._selectedDevice=e,this.generalSubject.next({type:"deviceName",deviceName:this._selectedDevice}),t(!0)})).catch((e=>{i(e.message)})))}})),n||(""!==this._selectedDevice?(this.generalSubject.next({type:"deviceName",deviceName:this._selectedDevice}),t(!0)):t(!1))):t(!0)}))}acquire(e,t){return new Promise(((i,n)=>{""!==this._selectedDevice?(this._dwtObject?.SetOpenSourceTimeout(3e3),t?this._dwtObject?.OpenSource()?this._dwtObject?.startScan(e):n(this._dwtObject?.ErrorString):this._dwtObject?.AcquireImageAsync(e).then((()=>this._dwtObject?.CloseSourceAsync())).then((()=>{this._dwtObject?.CloseWorkingProcess(),i(!0)})).catch((e=>{n(e.message)}))):n("Please select a device first!")}))}load(){return new Promise(((e,t)=>{if(!this._dwtObject)return t({code:-1,message:"invalid operation"});this._dwtObject?.Addon.PDF.SetReaderOptions({convertMode:S.Z.DWT.EnumDWT_ConvertMode.CM_AUTO,renderOptions:{resolution:200}}),this._dwtObject.IfShowFileDialog=!0,this._dwtObject.RegisterEvent("OnPostLoad",((e,t,i)=>{})),this._dwtObject?.LoadImageEx("",S.Z.DWT.EnumDWT_ImageType.IT_ALL,(()=>{e(!0)}),((e,i)=>t({code:e,message:i})))}))}getBlob(e,t,i){return new Promise(((n,s)=>{let a=this._dwtObject;if(i&&(a=i),t===S.Z.DWT.EnumDWT_ImageType.IT_ALL)s("Must specify an image type!");a?a.ConvertToBlob(e,t,((e,t,i)=>{n(e)}),((e,t)=>{s(t)})):s("invalid operation")}))}getBase64(e,t,i){return new Promise(((n,s)=>{let a=this._dwtObject;i&&(a=i),t===S.Z.DWT.EnumDWT_ImageType.IT_ALL&&s("Must specify an image type!"),a?a.ConvertToBase64(e,t,((e,t,i)=>{let a=e.getData(0,e.getLength());switch(i){case S.Z.DWT.EnumDWT_ImageType.IT_BMP:n("data:image/bmp;base64,"+a);break;case S.Z.DWT.EnumDWT_ImageType.IT_JPG:n("data:image/jpeg;base64,"+a);break;case S.Z.DWT.EnumDWT_ImageType.IT_TIF:case S.Z.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF:n("data:image/tiff;base64,"+a);break;case S.Z.DWT.EnumDWT_ImageType.IT_PNG:n("data:image/png;base64,"+a);break;case S.Z.DWT.EnumDWT_ImageType.IT_PDF:case S.Z.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF:n("data:application/pdf;base64,"+a);break;default:s("Wrong image type!")}}),((e,t)=>{s(t)})):s("invalid operation")}))}getExtension(e){switch(e){case S.Z.DWT.EnumDWT_ImageType.IT_BMP:return".bmp";case S.Z.DWT.EnumDWT_ImageType.IT_JPG:return".jpg";case S.Z.DWT.EnumDWT_ImageType.IT_PNG:return".png";case S.Z.DWT.EnumDWT_ImageType.IT_PDF:case S.Z.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF:return".pdf";case S.Z.DWT.EnumDWT_ImageType.IT_TIF:case S.Z.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF:return".tif";default:return".unknown"}}saveLocally(e,t,i,n){return new Promise(((s,a)=>{if(!this._dwtObject)return void a("invalid operation");this._beforeSaveIndex=this._dwtObject.CurrentImageIndexInBuffer;let o=(i,s,a)=>new Promise(((o,l)=>{let r=()=>{n&&(s=this._fileActualName,i=this._fileSavingPath+"/"+s),t!=S.Z.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF&&t!=S.Z.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF||this._dwtObject?.SelectImages([this._beforeSaveIndex]),o({name:s,path:i})},d=(e,i)=>{t!=S.Z.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF&&t!=S.Z.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF||this._dwtObject?.SelectImages([this._beforeSaveIndex]),l({code:e,message:i})};switch(a){case S.Z.DWT.EnumDWT_ImageType.IT_BMP:this._dwtObject?.SaveAsBMP(i,e[0],r,d);break;case S.Z.DWT.EnumDWT_ImageType.IT_JPG:this._dwtObject?.SaveAsJPEG(i,e[0],r,d);break;case S.Z.DWT.EnumDWT_ImageType.IT_TIF:this._dwtObject?.SaveAsTIFF(i,e[0],r,d);break;case S.Z.DWT.EnumDWT_ImageType.IT_PNG:this._dwtObject?.SaveAsPNG(i,e[0],r,d);break;case S.Z.DWT.EnumDWT_ImageType.IT_PDF:this._dwtObject?.SaveAsPDF(i,e[0],r,d);break;case S.Z.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF:this._dwtObject?.SelectImages(e),this._dwtObject?.SaveSelectedImagesAsMultiPagePDF(i,r,d);break;case S.Z.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF:this._dwtObject?.SelectImages(e),this._dwtObject?.SaveSelectedImagesAsMultiPageTIFF(i,r,d)}})),l=i+this.getExtension(t),r=this._fileSavingPath+"/"+l;n?(this._fileSavingPath="",this._fileActualName="",this._dwtObject.IfShowFileDialog=!1,S.Z.Lib.showMask(),this._dwtObject.RegisterEvent("OnGetFilePath",((e,i,n,l,r)=>{S.Z.Lib.hideMask(),""!==l||""!==r?e&&-1!=i&&(this._fileActualName=r,this._fileSavingPath=l,s(o(this._fileSavingPath+"/"+this._fileActualName,this._fileActualName,t))):a("User cancelled the operation.")})),this._dwtObject?.ShowFileDialog(!0,function(e){let t;if(D.bMac)switch(e){case S.Z.DWT.EnumDWT_ImageType.IT_BMP:t="BMP";break;case S.Z.DWT.EnumDWT_ImageType.IT_JPG:t="JPG,JPEG";break;case S.Z.DWT.EnumDWT_ImageType.IT_PNG:t="PNG";break;case S.Z.DWT.EnumDWT_ImageType.IT_PDF:case S.Z.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF:t="PDF";break;case S.Z.DWT.EnumDWT_ImageType.IT_TIF:case S.Z.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF:t="TIF,TIFF";break;default:t="TIF,TIFF,JPG,JPEG,PNG,PDF"}else switch(e){case S.Z.DWT.EnumDWT_ImageType.IT_BMP:t="BMP(*.bmp)|*.bmp";break;case S.Z.DWT.EnumDWT_ImageType.IT_JPG:t="JPG(*.jpg;*.jpeg)|*.jpg;*.jpeg";break;case S.Z.DWT.EnumDWT_ImageType.IT_PNG:t="PNG(*.png)|*.png";break;case S.Z.DWT.EnumDWT_ImageType.IT_PDF:case S.Z.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF:t="PDF(*.pdf)|*.pdf";break;case S.Z.DWT.EnumDWT_ImageType.IT_TIF:case S.Z.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF:t="TIF(*.tif;*.tiff)|*.tif;*.tiff";break;default:t="BMP,TIF,JPG,PNG,PDF|*.bmp;*.tif;*.png;*.jpg;*.pdf;*.tiff;*.jpeg"}return t}(t),0,"",l,!0,!1,0)):(this._dwtObject.IfShowFileDialog=!1,s(o(r,l,t)))}))}uploadToServer(e,t,i,n){return new Promise(((s,a)=>{let o=i.replace(new RegExp("<","gm"),"&lt;");o=o.replace(new RegExp(">","gm"),"&gt;");let l=o+this.getExtension(t),r=k.uploadTargetURL;this._dwtObject?.SetHTTPFormField("CustomInfo",n),this._dwtObject?.HTTPUpload(r,e,t,S.Z.DWT.EnumDWT_UploadDataFormat.Binary,l,(()=>{s({name:l})}),((e,t,i)=>{0==e||-2003==e?-2003==e&&""==i?a({code:e,message:t}):s({name:l}):(""!==i&&this.generalSubject.next({type:"uploadError",responsString:i}),a({code:e,message:t}))}))}))}}let C,A,N,F,B=[];function M(e,t,i){if(0==e)return L("<strong>"+t+"</strong><br />"),!0;if(-2115==e)return!0;if(-2003==e&&i&&""!=i){window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no").document.writeln(i)}return L("<span style='color:#cE5E04'><strong>"+t+"</strong></span><br />"),!1}function Z(e){var t;void 0!==(t=e)&&null!==t&&"string"===typeof t?(L(e),L("<br />")):e&&function(e){if(void 0===e||null===e)return!1;let t=parseInt(e);return 0==t||t>0||t<0}(e.code)&&e.message?M(e.code,e.message):e&&e.message&&(L(e.message),L("<br />"))}function U(e){L(["<strong>",e,"</strong>"].join(""))}function L(e){B.push(e);let t=a("DWTemessage");t&&(t.innerHTML=B.join(""),t.scrollTop=t.scrollHeight)}function R(e){if(e){let e=a("btnCrop");e&&(e.style.display="");let t=a("btnCropGray");t&&(t.style.display="none")}else{let e=a("btnCrop");e&&(e.style.display="none");let t=a("btnCropGray");t&&(t.style.display="")}}function G(e,t){if(t.length>0){let e=t[t.length-1];C=e.x,A=e.y,N=e.x+e.width,F=e.y+e.height,R(!0)}}function V(){C=0,A=0,N=0,F=0,R(!1)}function z(e,t,i,n,s){}var H=i(9332);var J=(e,t)=>{let{dwUtil:i}=e,{dwUtil:a}=t;const o=(0,H.useSearchParams)(),[l,r]=(0,s.useState)(),[d,c]=(0,s.useState)(),h=o.get("claimNo"),p=o.get("inwardNo");(0,s.useEffect)((()=>{h&&r(h),p&&c(p)}),[h,p]);const u=(0,s.useCallback)((e=>{r(e.target.value)}),[]),g=(0,s.useCallback)((e=>{r(e.target.value)}),[]);return console.log(o.get("claimNo")),(0,n.jsx)("div",{id:"divScanner",className:"divinput",children:(0,n.jsx)("ul",{className:"PCollapse",children:(0,n.jsxs)("li",{children:[(0,n.jsx)("div",{className:"divType",children:"Meta Information"}),(0,n.jsxs)("div",{id:"div_ScanImage",className:"divTableStyle",children:[(0,n.jsx)("ul",{id:"ulScaneImageHIDE",style:{marginBottom:"10px"},children:(0,n.jsxs)("li",{children:[(0,n.jsx)("label",{htmlFor:"source",children:(0,n.jsx)("p",{children:"Claim No"})}),(0,n.jsx)("input",{size:1,value:l,onChange:u,id:"source",style:{position:"relative",width:"100%",padding:"8px"}})]})}),(0,n.jsx)("ul",{id:"ulScaneImageHIDE",children:(0,n.jsxs)("li",{children:[(0,n.jsx)("label",{htmlFor:"source",children:(0,n.jsx)("p",{children:"Inward No"})}),(0,n.jsx)("input",{size:1,value:d,onChange:g,id:"source",style:{position:"relative",width:"100%",padding:"8px"}})]})})]})]})})})};const q="dwtcontrolContainer",K=new class{dwtService;dwtObject;thumbnail;bufferSubscription;generalSubscription;containerId;editorShown=!1;constructor(e){this.containerId=e,this.dwtService=new E(e)}onPageInit(){!function(){if(D.bIE&&D.bWin64){let e=a("samplesource64bit");e&&(e.style.display="inline"),e=a("samplesource32bit"),e&&(e.style.display="none")}}(),function(){let e=a("btnLoad");e&&(e.style.display=D.bLinux||D.bChromeOS?"none":"");let t=a("btnSave");t&&(t.style.display=D.bLinux||D.bChromeOS?"none":"")}(),function(){let e=[],t=screen.width,i=screen.height,n=D.bIE;t>1600&&t<3441&&i>1200&&i<2e3&&e.push("      html,body { font-size: 16px; }    ");t<1280?e.push("      .ds-dwt-content { width:983px;  }      #divEdit{ width:663px; }      #DWTcontainerTop,#dwtcontrolContainer,#dwt-NonInstallContainerID { width:665px; }      #ScanWrapper,#DWTdivMsg { width:315px;  }      #divNoScanners { width:275px;  }    "):t>=1280&&t<1792?e.push("      .ds-dwt-content { width:1068px;  }      #divEdit{ width:663px; }      #DWTcontainerTop,#dwtcontrolContainer,#dwt-NonInstallContainerID { width:665px; }      #ScanWrapper,#DWTdivMsg { width:400px;  }      #divNoScanners { width:275px;  }    "):t>=1792&&t<3441?e.push("      .ds-dwt-content { width:1395px;  }      #divEdit { width:928px; }      #DWTcontainerTop,#dwtcontrolContainer,#dwt-NonInstallContainerID { width:930px; }      #ScanWrapper,#DWTdivMsg { width:455px;  }      #divNoScanners { width:415px;  }    "):e.push("      .ds-dwt-content { width:2820px;  }      #divEdit { width:1898px; }      #DWTcontainerTop,#dwtcontrolContainer,#dwt-NonInstallContainerID { width:1900px; }      #ScanWrapper,#DWTdivMsg { width:900px;  }      #divNoScanners { width:515px;  }    ");i<=1080?e.push("      #dwt-NonInstallContainerID,#dwtcontrolContainer,#ScanWrapper  { height:760px; }    "):1600==t&&i<1440?e.push("      #dwt-NonInstallContainerID,#dwtcontrolContainer,#ScanWrapper { height:848px; }    "):i>1080&&i<1440?e.push("      #dwt-NonInstallContainerID,#dwtcontrolContainer,#ScanWrapper { height:880px; }    "):i>=1440&&i<2e3?e.push("      #dwt-NonInstallContainerID,#dwtcontrolContainer,#ScanWrapper { height:1050px; }    "):e.push("      #dwt-NonInstallContainerID,#dwtcontrolContainer,#ScanWrapper { height:1900px; }    ");t>1440&&t<3441&&i>1080&&i<2e3&&e.push('      .operateGrp input[type="radio"] { width:25px; height:20px; }      #divProductDetail li:first-child label:first-child,  #divProductDetail li:nth-child(2) label:first-child { width:250px !important; }       #tblLoadImage { width:275px;height:128px;line-height:30px;}      #divSaveDetail li p { margin-bottom: 3px; }      #divSaveDetail li label { margin-right: 30px; }      #divSaveDetail li input[type="radio"], #divSaveDetail li input[type="checkbox"] { width:18px; height:18px; vertical-align: middle; }      #divSaveDetail #txt_CustomInfo { margin-top: 10px; }      #resultWrap { min-height:80px; }      #resultWrap #div-uploadedFile tr { height:30px; }      #resultWrap .title { font-size:16px; }      #source { margin-top: 10px; }      label[for="BW"] { margin-left: 15px !important; }      #Resolution { margin-left: 14px; }      #divProductDetail li label input[type="radio"] { width:18px; height:18px; }      #ScanWrapper select, #divSaveDetail input[type="text"] { height:30px; }      #ScanWrapper input[type="checkbox"], #ScanWrapper input[type="radio"] { margin-right: 6px; }    ');i<=1024?1440!=t&&1600!=t||900!=i?e.push("        #tabCon { height:245px }       "):e.push("      #tabCon { height:255px }      "):i<2e3&&(1920==t&&1080==i||1680==t&&1050==i?e.push("        #tabCon { height:242px; padding-top: 15px }      "):1400==t&&1050==i?e.push("        #tabCon { height:255px; padding-top: 15px }      "):t>3e3&&i<=1080?e.push("        #tabCon { height:560px; padding-top: 15px }      "):t<3441&&i<1440?e.push("        #tabCon { height:273px; padding-top: 15px }      "):t<3441&&e.push("        #tabCon { height:280px; padding-top: 15px }      "));i<=1024?900==i?e.push("      #DWTdivMsg { height:198px }      "):e.push("      #DWTdivMsg{ height:210px; }      "):i>1024&&i<=1200?1400==t&&1050==i?e.push("      #DWTdivMsg { height:200px }      "):2048==t&&1152==i?e.push("      #DWTdivMsg { height:282px }      "):1600==t&&1200==i?e.push("      #DWTdivMsg { height:266px }      "):1920==t&&1200==i?e.push("      #DWTdivMsg { height:300px }      "):3840==t&&1080==i?e.push("      #DWTdivMsg { height:350px }      "):e.push("      #DWTdivMsg { height:210px }      "):i>1200&&(1392==i||1344==i?e.push("      #DWTdivMsg { height:285px }      "):1920==t&&1440==i?e.push("      #DWTdivMsg { height:445px }      "):i<2e3?e.push("        #DWTdivMsg{ height:440px; }      "):e.push("        #DWTdivMsg{ height:600px; }      "));i<900?e.push("    #dwtcontrolContainer { margin: 5px 0 20px 0; }    "):i>1200&&i<2e3&&e.push("      #divSaveDetail li:nth-child(2) { padding-top: 5px; }    ");if(e.push(".ds-dwt-content { display:block }"),n)window.style=e.join(""),document.createStyleSheet("javascript:style");else{var s=document.createElement("style");s.innerHTML=e.join(""),document.body.appendChild(s)}}(),this.bufferSubscription=this.dwtService.bufferSubject.subscribe((e=>{if("empty"===e)console.log("There is no image in the buffer.")})),this.generalSubscription=this.dwtService.generalSubject.subscribe((e=>{if(e&&e.type&&"uploadError"===e.type)this._handleUploadError(e)}));let e=this;this.dwtService.init((function(t){e.dwtObject=t,e.bindViewer(),e.dwtService.getDevices().then((function(i){let n=0==i.length;e._initedDynamicWebTWAIN(t,n),e._initDevices(i)})).catch((function(e){M(-1,e.message)}))}),(function(e){"string"===typeof e?M(-1,e):Z(e)}))}destroy(){this.unBindViewer(),this.generalSubscription?.unsubscribe(),this.bufferSubscription?.unsubscribe(),this.dwtService.destroy(),this.dwtObject?.dispose()}bindViewer(){this.dwtObject&&(this.dwtObject.Viewer.bind(document.getElementById(this.containerId)),this.dwtObject.Viewer.pageMargin=10,this.updateViewer(),this.thumbnail?(this.dwtObject.Viewer.off("imageRightClick"),this.dwtObject.Viewer.cursor="crosshair",this.dwtObject.Viewer.showPageNumber=!0,this.thumbnail.updateViewMode({columns:1,rows:3}),this.thumbnail.on("click",(e=>{this.handleOnMouseClick(e)})),this.thumbnail.on("dragdone",(e=>{this.handleOnIndexChangeDragDropDone(e)})),this.thumbnail.on("keydown",(e=>{this.handleOnKeyDown(e)})),this.dwtObject?.Viewer.on("wheel",(e=>{this.handleOnMouseWheel(e)}))):console.log(this.dwtObject?.ErrorString))}unBindViewer(){if(this.dwtObject?.Viewer.unbind()){let e=document.getElementById(this.containerId);for(;e.firstChild;)e.lastChild&&e.removeChild(e.lastChild);return!0}return M(-1,this.dwtObject?.ErrorString),!1}updateViewer(){return!!this.dwtObject&&(this.thumbnail=this.dwtObject?.Viewer.createThumbnailViewer({size:"25%"}),this.dwtObject.Viewer.width="100%",this.dwtObject.Viewer.height="100%",this.dwtObject.Viewer.show(),this.thumbnail&&(this.thumbnail.placeholderBackground="#D1D1D1",this.thumbnail.show()),!0)}async uploadScannedImages(){try{const t=this.dwtService._dwtObject?.HowManyImagesInBuffer;if(console.log(`Number of images in buffer: ${t}`),0===t||!t)return console.log("No images to process"),"";const i=[];for(let o=0;o<t;o++)try{const e=await this.dwtService.getBase64([o],Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG);i.push(e)}catch(e){console.error(`Error processing image ${o}:`,e)}const n=await this.generatePdfFromBase64Images(i),s=this.convertPdfToByteString(n).split(",")[1],{data:a}=await O.Z.post("http://10.100.50.36:5001/login",{password:"P@&&w0rd",username:"hitpa-user"});await O.Z.post("http://10.100.50.36:5001/documents/upload",{transactionId:"CLAIM-240119-dqtlphxklqr5",transactionType:"CASHLESS|REMBUIRSHMENT|PRE-POST|IPD|OPD",file:[{docType:"SCANNED_DOC",attributes:[],url:"",byteString:s,name:"scanned.pdf",checkSum:""}]},{headers:{Authorization:`bearer ${a.accessToken}`}}),alert("Document uploaded successfully")}catch(e){return console.error("Error getting PDF of scanned images:",e),""}}generatePdfFromBase64Images(e){const t=new W.kH;for(let i=0;i<e.length;i++){const n=t.getImageProperties(e[i]),s=t.internal.pageSize.getWidth(),a=t.internal.pageSize.getHeight(),o=s-20,l=a-20,r=Math.min(o/n.width,l/n.height),d=n.width*r,c=n.height*r;0!==i&&t.addPage(),t.addImage(e[i],"PNG",(s-d)/2,(a-c)/2,d,c)}return t}convertPdfToByteString(e){return e.output("datauristring")}base64ToBlob(e,t){const i=atob(e),n=new Array(i.length);for(let a=0;a<i.length;a++)n[a]=i.charCodeAt(a);const s=new Uint8Array(n);return new Blob([s],{type:t})}checkIfImagesInBuffer(){return 0!=this.dwtObject?.HowManyImagesInBuffer||(L("<span style='color:#cE5E04'><strong>There is no image in the buffer.</strong></span><br />"),!1)}onclickShowImageEditor(){if(!this.dwtObject||!this.checkIfImagesInBuffer())return;let e=this.dwtObject?.Viewer.createImageEditor();e?.show(),this.editorShown=!0}onclickRotateLeft(){this.dwtObject&&this.checkIfImagesInBuffer()&&(this.dwtObject?.RotateLeft(this.dwtObject?.CurrentImageIndexInBuffer),U("Rotate left: "),this._checkErrorString())}onclickCrop(){if(this.dwtObject&&this.checkIfImagesInBuffer()){if(0!=C||0!=A||0!=N||0!=F){if(this.dwtObject?.Crop(this.dwtObject?.CurrentImageIndexInBuffer,C,A,N,F),C=0,A=0,N=0,F=0,this.dwtObject?.isUsingActiveX()){let e;e=this.dwtObject,e.SetSelectedImageArea(this.dwtObject?.CurrentImageIndexInBuffer,0,0,0,0)}return U("Crop: "),void this._checkErrorString()}L("<strong>Crop: </strong>failed. Please first select the area you'd like to crop.<br />")}}onclickSelect(){this.handAndSelectSelected(!1),this.dwtObject&&(this.dwtObject.Viewer.cursor="crosshair")}handAndSelectSelected(e){let t=a("btnHand"),i=a("btnHand_selected"),n=a("btnSelect"),s=a("btnSelect_selected");e?(t&&(t.style.display="none"),i&&(i.style.display=""),n&&(n.style.display=""),s&&(s.style.display="none")):(t&&(t.style.display=""),i&&(i.style.display="none"),n&&(n.style.display="none"),s&&(s.style.display=""))}onclickZoomOut(){if(!this.dwtObject||!this.checkIfImagesInBuffer())return;if(Math.round(100*this.dwtObject.Viewer.zoom)<=2)return;this.dwtObject.Viewer.zoom=(100*this.dwtObject?.Viewer.zoom-5)/100,this.updateZoomInfo(),this._enableButtonForZoomInAndOut()}onclickZoomIn(){if(!this.dwtObject||!this.checkIfImagesInBuffer())return;if(Math.round(100*this.dwtObject.Viewer.zoom)>=6500)return;this.dwtObject.Viewer.zoom=(100*this.dwtObject?.Viewer.zoom+5)/100,this.updateZoomInfo(),this._enableButtonForZoomInAndOut()}onclickOrigSize(){if(!this.dwtObject||!this.checkIfImagesInBuffer())return;let e=a("btnOrigSize");e&&(e.style.display="none");let t=a("btnFitWindow");t&&(t.style.display=""),this.dwtObject.Viewer.zoom=1,this.updateZoomInfo(),this._enableButtonForZoomInAndOut()}onclickFitWindow(){if(!this.dwtObject||!this.checkIfImagesInBuffer())return;let e=a("btnOrigSize");e&&(e.style.display="");let t=a("btnFitWindow");t&&(t.style.display="none"),this.dwtObject?.Viewer.fitWindow(),this.updateZoomInfo(),this._enableButtonForZoomInAndOut()}onclickHandButton(){this.dwtObject&&(this.handAndSelectSelected(!0),this.dwtObject.Viewer.cursor="pointer")}showNoScanners(){let e=a("divNoScanners");if(e){e.style.visibility="visible";let t=a("Resolution");t&&(t.style.visibility="hidden")}}hideNoScanners(){let e=a("divNoScanners");if(e){e.style.visibility="hidden";let t=a("Resolution");t&&(t.style.visibility="visible")}}async save(e,t,i,n,s){if(!this.dwtObject||!this.checkIfImagesInBuffer())return;let a="server"==e,l="local"==e,r=function(e){let t=e.toLocaleLowerCase(),i=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF;switch(t){case"bmp":i=Dynamsoft.DWT.EnumDWT_ImageType.IT_BMP;break;case"jpg":i=Dynamsoft.DWT.EnumDWT_ImageType.IT_JPG;break;case"tif":i=Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF;break;case"png":i=Dynamsoft.DWT.EnumDWT_ImageType.IT_PNG;break;case"pdf":i=Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF}return i}(i),d=[];if("true"==n){let e=this.dwtObject?.HowManyImagesInBuffer;for(let t=0;t<e;t++)d.push(t)}else{let e=this.dwtObject?.CurrentImageIndexInBuffer;d.push(e)}if(a){U("Upload: ");let e=o("txt_CustomInfo").value;try{await this.dwtService.uploadToServer(d,r,t,e),alert("Upload successful.");let n=await this.dwtService.getBase64(d,r);console.log("Base64 Image String:",n);const s=new FormData;s.append("file",n),s.append("filename",t+"."+i),s.append("customInfo",e),console.log(s),await O.Z.post("http://52.66.158.213:8001/api/documents/post_document/",s,{headers:{"Content-Type":"multipart/form-data"}}),M(0,"Successful.")}catch(c){"string"===typeof c?M(-1,c):Z(c)}}else if(l){U("Save Image: ");let e=await this.dwtService.getBase64(d,r);console.log("Base64 Image String:",e),r==Dynamsoft.DWT.EnumDWT_ImageType.IT_TIF?d.length>1&&(r=Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF):r==Dynamsoft.DWT.EnumDWT_ImageType.IT_PDF&&d.length>1&&(r=Dynamsoft.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF);try{await this.dwtService.saveLocally(d,r,t,!0),M(0,"Successful.")}catch(c){"string"===typeof c?M(-1,c):Z(c)}}}acquireImage(e,t){this.dwtService.selectADevice(e).then((()=>this.dwtService.acquire(t))).then((()=>{U("Scan: "),M(0,"Successful.")}),(e=>{U("Scan: "),M(-1,e)}))}loadImage(){U("Loaded image: "),this.dwtService.load().then((()=>{this._checkErrorString();let e=a("divLoadAndDownload");e&&e.parentNode?.removeChild(e)}),(e=>{M(e.code,e.message)}))}handleDeviceChanged(e){""!==e&&"Choose..."!==e&&this.dwtService.selectADevice(e).then((e=>{e||M(-1,"Device selecting failed!");let t=o("ShowUI"),i=l("source");if(t){let e=i.selectedIndex;if(e>=0){0==i.options[e].value.indexOf("WIA-")?(t.disabled=!0,t.checked=!1):t.disabled=!1}}}),(e=>M(-1,"string"===typeof e?e:"Device selecting failed!")))}handleResizeEvent(){this.editorShown||this.updateViewer()}removeAllImages(){this.dwtObject?.RemoveAllImages(),this.dwtObject?.RemoveImage(0)}removeCurrentImage(){this.dwtObject?.RemoveImage(this.dwtObject?.CurrentImageIndexInBuffer),0==this.dwtObject?.HowManyImagesInBuffer&&this.dwtObject?.RemoveImage(0),this.updatePageInfo()}updatePageInfo(){if(!this.dwtObject)return;let e=o("DW_TotalImage");e&&(e.value=""+this.dwtObject.HowManyImagesInBuffer);let t=o("DW_CurrentImage");t&&(t.value=""+(this.dwtObject.CurrentImageIndexInBuffer+1)),this.updateZoomInfo()}updateZoomInfo(){if(!this.dwtObject)return;let e=o("DW_spanZoom");e&&(0==this.dwtObject?.HowManyImagesInBuffer?e.value="100%":e.value=Math.round(100*this.dwtObject?.Viewer.zoom)+"%")}onclickSaveDocuments(){}onclickShowUploadedFiles(){}handleCloseImageEditorUI(){this.updatePageInfo()}handleOnMouseClick(e){this.updatePageInfo()}handleOnMouseWheel(e){this.updatePageInfo()}handleOnIndexChangeDragDropDone(e){this.updatePageInfo()}handleOnKeyDown(e){this.updatePageInfo()}_handleOnBitmapChanged(e,t){3==t&&this.updatePageInfo(),4==t&&this.updateZoomInfo(),5==t&&V()}_handleOnPostTransfer(){this.updatePageInfo()}_handleOnPostLoad(e,t,i){this.updatePageInfo()}_checkErrorString(){return!!this.dwtObject&&M(this.dwtObject?.ErrorCode,this.dwtObject?.ErrorString)}_handleUploadError(e){M(-1,e.message)}_initDevices(e){let t=l("source");if(t){t.options.length=0;let i=e.length,n="";for(let s=0;s<i;s++){let i=new Option(e[s].label,e[s].name);0==s&&(i.selected=!0,n=i.value),t.options.add(i)}i>0&&this.handleDeviceChanged(n)}}_downloadSamplePDF(){if(!this.dwtObject)return;U("Downloaded image: ");this.dwtObject.IfSSL=Dynamsoft.Lib.detect.ssl;let e=""==location.port?80:parseInt(location.port);1==Dynamsoft.Lib.detect.ssl&&(e=""==location.port?443:parseInt(location.port)),this.dwtObject.HTTPPort=e;this.dwtObject?.HTTPDownload(location.hostname,"assets/Images/DynamsoftSample.pdf",(()=>{M(0,"Successful.");let e=a("divLoadAndDownload");e&&e.parentNode?.removeChild(e)}),(function(e,t){M(e,t)}))}_enableButtonForZoomInAndOut(){if(!this.dwtObject)return;let e=a("btnZoomIn"),t=Math.round(100*this.dwtObject.Viewer.zoom);if(t>=6500)r(e,"grayimg");else{d(e,"grayimg");let i=a("btnZoomOut");if(t<=2)return void r(i,"grayimg");d(i,"grayimg")}}_initedDynamicWebTWAIN(e,t){let i=a("DWTemessage");if(i&&(i.ondblclick=function(){i.innerHTML="",B.splice(0)}),!D.bWin){let e=a("lblShowUI");e&&(e.style.display="none");let t=a("ShowUI");t&&(t.style.display="none")}if(e&&0==e.ErrorCode){let i=e.Viewer.createThumbnailViewer();if(i&&(i.showPageNumber=!0,i.selectedPageBackground=i.background,i.selectedPageBorder="solid 2px #FE8E14",i.hoverPageBorder="solid 2px #FE8E14",i.placeholderBackground="#D1D1D1",i.show(),i.hoverPageBackground=i.background,i.on("click",(e=>{this.handleOnMouseClick(e)})),i.on("dragdone",(e=>{this.handleOnIndexChangeDragDropDone(e)})),i.on("keydown",(()=>{this.handleOnKeyDown()}))),e.Viewer.on("wheel",(e=>{this.handleOnMouseWheel(e)})),e.Viewer.on("OnPaintDone",(e=>{this.handleOnMouseWheel(e)})),e.Viewer.allowSlide=!1,(n=a("DWTNonInstallContainerID"))&&(n.style.display="none"),e.IfAllowLocalCache=!0,e.ImageCaptureDriverType=4,function(){let e=l("fileType");e&&(e.options.length=0,e.options.add(new Option("pdf","pdf")),e.options.add(new Option("tif","tif")),e.options.add(new Option("jpg","jpg")),e.options.add(new Option("png","png")),e.options.add(new Option("bmp","bmp")),e.selectedIndex=0);let t=o("AllPages");t&&(t.checked=!0)}(),l("source")){if(t&&this._downloadSamplePDF(),t){let e=a("pNoScanner");e&&(D.bWin?(e.style.display="block",e.style.textAlign="center"):e.style.display="none");let t=o("btnScan");t&&(t.disabled=!0)}if(!t){let e=a("divTwainType");e&&(e.style.display="");let t=o("btnScan");t&&(t.disabled=!1),r(a("btnScan"),"btnScanActive")}C=0,A=0,N=0,F=0;for(let e=0;e<document.links.length;e++)"ClosetblLoadImage"==document.links[e].className&&(document.links[e].onclick=()=>{this.hideNoScanners()});if(t){if(D.bWin){this.showNoScanners();let e=a("Resolution");e&&(e.style.display="none")}}else{let e=a("divBlank");e&&(e.style.display="none")}this.updatePageInfo(),e.RegisterEvent("CloseImageEditorUI",(()=>{this.editorShown=!1,this.handleCloseImageEditorUI()})),e.RegisterEvent("OnBitmapChanged",(()=>{this._handleOnBitmapChanged()})),e.RegisterEvent("OnPostTransfer",(()=>{this._handleOnPostTransfer()})),e.RegisterEvent("OnPostLoad",((e,t,i)=>{this._handleOnPostLoad(e,t,i)})),e.RegisterEvent("OnPostAllTransfers",(()=>{this.dwtObject?.CloseSource(),this.updatePageInfo()})),e.RegisterEvent("OnGetFilePath",z),e.Viewer.on("pageAreaSelected",G),e.Viewer.on("pageAreaUnselected",V)}}var n}toggleNoScanners(){let e=a("divNoScanners");if(e)switch(e.style.visibility){case"":case"hidden":this.showNoScanners();break;case"visible":this.hideNoScanners()}}}(q);class Y extends s.Component{componentDidMount(){K.onPageInit()}componentWillUnmount(){K.destroy()}render(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"ds-dwt-content ds-dwt-center",children:(0,n.jsx)("div",{className:"ds-dwt-header",children:(0,n.jsx)("h1",{children:"Scan documents"})})}),(0,n.jsxs)("div",{className:"ds-dwt-content ds-dwt-center",children:[(0,n.jsxs)("div",{id:"DWTcontainerTop",children:[(0,n.jsx)(j,{dwtUtil:K}),(0,n.jsx)("div",{id:q})]}),(0,n.jsxs)("div",{id:"ScanWrapper",children:[(0,n.jsx)(_,{dwtUtil:K}),(0,n.jsx)(J,{dwUtil:K})]})]})]})}}var Q=i(55);const X=new(i(4775).Z)({url:"https://identity.consint.ai",realm:"master",clientId:"testcloak"}),$=()=>{const{keycloak:e,initialized:t}=(0,Q.Eh)();return(0,s.useEffect)((()=>{t&&!e.authenticated&&e.login({redirectUri:window.location.origin})}),[t,e]),t?e.authenticated?(console.log(e.idToken),(0,n.jsx)("div",{children:(0,n.jsx)(Y,{})})):(0,n.jsx)("h1",{children:"Redirecting to login..."}):(0,n.jsx)("h1",{children:"Initializing..."})};var ee=()=>{const e={onLoad:"login-required",silentCheckSsoRedirectUri:window.location.origin+"/silent-check-sso.html",pkceMethod:"S256",checkLoginIframe:!1,enableLogging:!0,flow:"standard",redirectUri:window.location.origin,responseMode:"query"};return(0,n.jsx)(Q.S_,{authClient:X,initOptions:e,onEvent:(e,t)=>{console.log("Keycloak Event:",e,t)},children:(0,n.jsx)($,{})})}}}]);